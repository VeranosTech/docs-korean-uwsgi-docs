

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ko" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ko" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The RADOS plugin &mdash; uWSGI 2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="색인" href="genindex.html" />
    <link rel="search" title="검색" href="search.html" />
    <link rel="next" title="The Pty plugin" href="Pty.html" />
    <link rel="prev" title="The GlusterFS plugin" href="GlusterFS.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> uWSGI
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="WSGIquickstart.html">Quickstart for Python/WSGI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="PSGIquickstart.html">Quickstart for perl/PSGI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="RackQuickstart.html">Quickstart for ruby/Rack applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="Snippets.html">Snippets</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Download.html">Getting uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install.html">Installing uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="BuildSystem.html">The uWSGI build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="Management.html">Managing the uWSGI server</a></li>
<li class="toctree-l1"><a class="reference internal" href="LanguagesAndPlatforms.html">Supported languages and platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="SupportedPlatforms.html">Supported Platforms/Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebServers.html">Web server integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="ThingsToKnow.html">Things to know (best practices and &quot;issues&quot;) READ IT !!!</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration.html">Configuring uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="FallbackConfig.html">Fallback configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConfigLogic.html">Configuration logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="Options.html">uWSGI Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="CustomOptions.html">Defining new options for your instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="ParsingOrder.html">How uWSGI parses config files</a></li>
<li class="toctree-l1"><a class="reference internal" href="Vars.html">uwsgi protocol magic variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="Protocol.html">The uwsgi Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="AttachingDaemons.html">Managing external daemons/services</a></li>
<li class="toctree-l1"><a class="reference internal" href="MasterFIFO.html">The Master FIFO</a></li>
<li class="toctree-l1"><a class="reference internal" href="Inetd.html">Socket activation with inetd/xinetd</a></li>
<li class="toctree-l1"><a class="reference internal" href="Upstart.html">Running uWSGI via Upstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="Systemd.html">Systemd</a></li>
<li class="toctree-l1"><a class="reference internal" href="Circus.html">Running uWSGI instances with Circus</a></li>
<li class="toctree-l1"><a class="reference internal" href="Embed.html">Embedding an application in uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="LogFormat.html">Formatting uWSGI requests logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="LogEncoders.html">Log encoders</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hooks.html">Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="WorkerOverride.html">Overriding Workers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="ThirdPartyPlugins.html">uWSGI third party plugins</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/CachingCookbook.html">The uWSGI Caching Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/Django_and_nginx.html">Setting up Django and your web server with uWSGI and nginx</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/dreamhost.html">Running uWSGI on Dreamhost shared hosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/heroku_python.html">Running python webapps on Heroku with uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/heroku_ruby.html">Running Ruby/Rack webapps on Heroku with uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/ReliableFuse.html">Reliably use FUSE filesystems for uWSGI vassals (with Linux)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/DynamicProxying.html">Build a dynamic proxy using RPC and internal routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/GraphiteAndMetrics.html">Setting up Graphite on Ubuntu using the Metrics subsystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="articles/SerializingAccept.html">Serializing accept(), AKA Thundering Herd, AKA the Zeeg Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/TheArtOfGracefulReloading.html">The Art of Graceful Reloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/FunWithPerlEyetoyRaspberrypi.html">Fun with Perl, Eyetoy and RaspberryPi</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/OffloadingWebsocketsAndSSE.html">Offloading Websockets and Server-Sent Events AKA &quot;Combine them with Django safely&quot;</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/WSGIEnvBehaviour.html">WSGI env behaviour policies</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AlarmSubsystem.html">The uWSGI alarm subsystem (from 1.3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Caching.html">The uWSGI caching framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebCaching.html">WebCaching framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cron.html">The uWSGI cron-like interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="Fastrouter.html">The uWSGI FastRouter</a></li>
<li class="toctree-l1"><a class="reference internal" href="InternalRouting.html">uWSGI internal routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="Legion.html">The uWSGI Legion subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Locks.html">Locks</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mules.html">uWSGI Mules</a></li>
<li class="toctree-l1"><a class="reference internal" href="OffloadSubsystem.html">The uWSGI offloading subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Queue.html">The uWSGI queue framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="RPC.html">uWSGI RPC Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="SharedArea.html">SharedArea -- share memory pages between uWSGI components</a></li>
<li class="toctree-l1"><a class="reference internal" href="Signals.html">The uWSGI Signal Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Spooler.html">The uWSGI Spooler</a></li>
<li class="toctree-l1"><a class="reference internal" href="SubscriptionServer.html">uWSGI Subscription Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="StaticFiles.html">Serving static files with uWSGI (updated to 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="SNI.html">SNI - Server Name Identification (virtual hosting for SSL nodes)</a></li>
<li class="toctree-l1"><a class="reference internal" href="GeoIP.html">The GeoIP plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="Transformations.html">uWSGI Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebSockets.html">WebSocket support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Metrics.html">The Metrics subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Chunked.html">The Chunked input API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Cheaper.html">The uWSGI cheaper subsystem -- adaptive process spawning</a></li>
<li class="toctree-l1"><a class="reference internal" href="Emperor.html">The uWSGI Emperor -- multi-app deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="Broodlord.html">Auto-scaling with Broodlord mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="Zerg.html">Zerg mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="DynamicApps.html">Adding applications dynamically</a></li>
<li class="toctree-l1"><a class="reference internal" href="SSLScaling.html">Scaling SSL connections (uWSGI 1.9)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Capabilities.html">Setting POSIX Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cgroups.html">Running uWSGI in a Linux CGroup</a></li>
<li class="toctree-l1"><a class="reference internal" href="KSM.html">Using Linux KSM in uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Namespaces.html">Jailing your apps using Linux Namespaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="Namespaces.html#the-old-way-the-namespace-option">The old way: the --namespace option</a></li>
<li class="toctree-l1"><a class="reference internal" href="FreeBSDJails.html">FreeBSD Jails</a></li>
<li class="toctree-l1"><a class="reference internal" href="ForkptyRouter.html">The Forkpty Router</a></li>
<li class="toctree-l1"><a class="reference internal" href="TunTapRouter.html">The TunTap Router</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Nagios.html">Monitoring uWSGI with Nagios</a></li>
<li class="toctree-l1"><a class="reference internal" href="SNMP.html">The embedded SNMP server</a></li>
<li class="toctree-l1"><a class="reference internal" href="PushingStats.html">Pushing statistics (from 1.4)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Carbon.html">Integration with Graphite/Carbon</a></li>
<li class="toctree-l1"><a class="reference internal" href="StatsServer.html">The uWSGI Stats Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="Metrics.html">The Metrics subsystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Async.html">uWSGI asynchronous/non-blocking modes (updated to uWSGI 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Gevent.html">The Gevent loop engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tornado.html">The Tornado loop engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="uGreen.html">uGreen -- uWSGI Green Threads</a></li>
<li class="toctree-l1"><a class="reference internal" href="asyncio.html">The asyncio loop engine (CPython &gt;= 3.4, uWSGI &gt;= 2.0.4)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Apache.html">Apache support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cherokee.html">Cherokee support</a></li>
<li class="toctree-l1"><a class="reference internal" href="HTTP.html">Native HTTP support</a></li>
<li class="toctree-l1"><a class="reference internal" href="HTTPS.html">HTTPS 지원 (1.3 버전부터)</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPDY.html">The SPDY router (uWSGI 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lighttpd.html">Lighttpd support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mongrel2.html">Attaching uWSGI to Mongrel2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Nginx.html">Nginx support</a></li>
<li class="toctree-l1"><a class="reference internal" href="OpenBSDhttpd.html">Using OpenBSD httpd as proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="OpenBSDhttpd.html#notes">Notes</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Python.html">Python support</a></li>
<li class="toctree-l1"><a class="reference internal" href="PyPy.html">The PyPy plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="PHP.html">Running PHP scripts in uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Perl.html">uWSGI Perl support (PSGI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Ruby.html">Ruby support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lua.html">Using Lua/WSAPI with uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="JVM.html">JVM in the uWSGI server (updated to 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mono.html">The Mono ASP.NET plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="CGI.html">Running CGI scripts on uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="GCCGO.html">The GCCGO plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="Symcall.html">The Symcall plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSLT.html">The XSLT plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="SSI.html">SSI (Server Side Includes) plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="V8.html">uWSGI V8 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="GridFS.html">The GridFS plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="GlusterFS.html">The GlusterFS plugin</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The RADOS plugin</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#step1-ceph-cluster-and-content">Step1: Ceph cluster and content</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step2-uwsgi">Step2: uWSGI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#high-availability">High availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="#multiple-mountpoints">Multiple mountpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#http-methods">HTTP methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#caching-example">Caching example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#security-note">Security note</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Pty.html">The Pty plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPNEGO.html">SPNEGO authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="LDAP.html">Configuring uWSGI with LDAP</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Erlang.html">Integrating uWSGI with Erlang</a></li>
<li class="toctree-l1"><a class="reference internal" href="ManagementFlag.html">Management Flags</a></li>
<li class="toctree-l1"><a class="reference internal" href="Go.html">uWSGI Go support (1.4 only)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.18.html">uWSGI 2.0.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.17.1.html">uWSGI 2.0.17.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.17.html">uWSGI 2.0.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.16.html">uWSGI 2.0.16</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.15.html">uWSGI 2.0.15</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.14.html">uWSGI 2.0.14</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.13.1.html">uWSGI 2.0.13.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.13.html">uWSGI 2.0.13</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.12.html">uWSGI 2.0.12</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.11.2.html">uWSGI 2.0.11.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.11.1.html">uWSGI 2.0.11.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.11.html">uWSGI 2.0.11</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.10.html">uWSGI 2.0.10</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.9.html">uWSGI 2.0.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.8.html">uWSGI 2.0.8</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.7.html">uWSGI 2.0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.6.html">uWSGI 2.0.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.5.html">uWSGI 2.0.5</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.4.html">uWSGI 2.0.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.3.html">uWSGI 2.0.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.2.html">uWSGI 2.0.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.1.html">uWSGI 2.0.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.html">uWSGI 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.21.html">uWSGI 1.9.21</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.20.html">uWSGI 1.9.20</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.19.html">uWSGI 1.9.19</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.18.html">uWSGI 1.9.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.17.html">uWSGI 1.9.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.16.html">uWSGI 1.9.16</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.15.html">uWSGI 1.9.15</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.14.html">uWSGI 1.9.14</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.13.html">uWSGI 1.9.13</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.12.html">uWSGI 1.9.12</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.11.html">uWSGI 1.9.11</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.10.html">uWSGI 1.9.10</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.9.html">uWSGI 1.9.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.8.html">uWSGI 1.9.8</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.7.html">uWSGI 1.9.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.6.html">uWSGI 1.9.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.5.html">uWSGI 1.9.5</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.4.html">uWSGI 1.9.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.3.html">uWSGI 1.9.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.2.html">uWSGI 1.9.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.1.html">uWSGI 1.9.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.html">uWSGI 1.9</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">uWSGI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>The RADOS plugin</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Rados.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-rados-plugin">
<h1>The RADOS plugin<a class="headerlink" href="#the-rados-plugin" title="제목 주소">¶</a></h1>
<p>Available from uWSGI 1.9.16, stable from uWSGI 2.0.6</p>
<p>official modifier1: 28</p>
<p>Authors: Javier Guerra, Marcin Deranek, Roberto De Ioris, Sokolov Yura aka funny_falcon</p>
<p>The 'rados' plugin allows you to serve objects stored in a Ceph cluster directly using the librados API.</p>
<p>Note that it's not the CephFS filesystem, nor the 'radosgw' S3/Swift-compatible layer; RADOS is the bare object-storage layer.</p>
<div class="section" id="step1-ceph-cluster-and-content">
<h2>Step1: Ceph cluster and content<a class="headerlink" href="#step1-ceph-cluster-and-content" title="제목 주소">¶</a></h2>
<p>If you want to try a minimal Ceph instalation, you can follow this guide: <a class="reference external" href="http://ceph.com/docs/master/start/">http://ceph.com/docs/master/start/</a>. note that
you only need the OSD and MON daemons, the MDS are needed only for CephFS filesystems.</p>
<p>Once you get it running, you should have a configuration file (by default on /etc/ceph/ceph.con), and should be able to use the <cite>rados</cite> utility.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rados lspools
</pre></div>
</div>
<p>by default, you should have at least the 'data', 'metadata' and 'rbd' pools.  Now add some content to the 'data' pool.
For example, if you have a 'list.html' file and images 'first.jpeg', 'second.jpeg' on a subdirectory 'imgs/':</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rados -p data put list.html list.html
rados -p data put imgs/first.jpeg imgs/first.jpeg
rados -p data put imgs/second.jpeg imgs/second.jpeg
rados -p data ls -
</pre></div>
</div>
<p>note that RADOS doesn't have a concept of directories, but the object names can contain slashes.</p>
</div>
<div class="section" id="step2-uwsgi">
<h2>Step2: uWSGI<a class="headerlink" href="#step2-uwsgi" title="제목 주소">¶</a></h2>
<p>A build profile, named 'rados' is already available, so you can simply do:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>make <span class="nv">PROFILE</span><span class="o">=</span>rados
</pre></div>
</div>
<p>or</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python uwsgiconfig.py --build rados
</pre></div>
</div>
<p>or use the installer</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># this will create a binary called /tmp/radosuwsgi that you will use instead of &#39;uwsgi&#39;</span>
curl http://uwsgi.it/install <span class="p">|</span> bash -s rados /tmp/radosuwsgi
</pre></div>
</div>
<p>Obviously you can build rados support as plugin</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --build-plugin plugins/rados/
</pre></div>
</div>
<p>or the old style:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python uwsgiconfig.py --plugin plugins/rados/
</pre></div>
</div>
<p>You can now start an HTTP server to serve RADOS objects:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="c1">; bind on port 9090</span>
<span class="na">http-socket</span> <span class="o">=</span> <span class="s">:9090</span>
<span class="c1">; set the default modifier1 to the rados one</span>
<span class="na">http-socket-modifier1</span> <span class="o">=</span> <span class="s">28</span>
<span class="c1">; mount our rados pool</span>
<span class="na">rados-mount</span> <span class="o">=</span> <span class="s">mountpoint=/rad/,pool=data,config=/etc/ceph/ceph.conf</span>
<span class="c1">; spawn 30 threads</span>
<span class="na">threads</span> <span class="o">=</span> <span class="s">30</span>
</pre></div>
</div>
<p>the 'rados-mount' parameter takes various subparameters:</p>
<blockquote>
<div><ul class="simple">
<li>mountpoint: required, the URL prefix on which the RADOS objects will appear.</li>
<li>pool: required, the RADOS pool to serve.</li>
<li>config: optional, the path to the ceph config file.</li>
<li>timeout: optional, set the timeout for operations, in seconds</li>
<li>allow_put: allow calling the <code class="docutils literal notranslate"><span class="pre">PUT</span></code> HTTP method to store new objects</li>
<li>allow_delete: allow calling the <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> HTTP method to remove objects</li>
<li>allow_mkcol: allow calling <code class="docutils literal notranslate"><span class="pre">MKCOL</span></code> HTTP method to create new pools</li>
<li>allow_propfind: (requires uWSGI 2.1) allow calling the WebDAV <code class="docutils literal notranslate"><span class="pre">PROPFIND</span></code> method</li>
<li>buffer_size: maximum buffer size for <code class="docutils literal notranslate"><span class="pre">GET</span></code> requests in bytes (min 8192, max 16777216, default to 131072)</li>
<li>put_buffer_size: maximum buffer size for <code class="docutils literal notranslate"><span class="pre">PUT</span></code> requests (default to buffer_size)</li>
</ul>
</div></blockquote>
<p>In this example, your content will be served at <a class="reference external" href="http://localhost:9090/rad/list.html">http://localhost:9090/rad/list.html</a>, <a class="reference external" href="http://localhost:9090/rad/imgs/first.jpeg">http://localhost:9090/rad/imgs/first.jpeg</a>
and <a class="reference external" href="http://localhost:9090/rad/imgs/second.jpeg">http://localhost:9090/rad/imgs/second.jpeg</a>.</p>
</div>
<div class="section" id="high-availability">
<h2>High availability<a class="headerlink" href="#high-availability" title="제목 주소">¶</a></h2>
<p>The RADOS storage system is fully distributed, just starting several uWSGI workers on several machines with the same
'ceph.conf', all will see the same pools.  If they all serve on the same mountpoint, you get a failure-resistant
RADOS-HTTP gateway.</p>
</div>
<div class="section" id="multiple-mountpoints">
<h2>Multiple mountpoints<a class="headerlink" href="#multiple-mountpoints" title="제목 주소">¶</a></h2>
<p>You can issue several 'rados-mount' entries, each one will define a new mountpoint.  This way you can expose different
RADOS pools at different URLs.</p>
</div>
<div class="section" id="http-methods">
<h2>HTTP methods<a class="headerlink" href="#http-methods" title="제목 주소">¶</a></h2>
<p>The following methods are supported:</p>
<ul class="simple">
<li>GET -&gt; retrieve a resource</li>
<li>HEAD -&gt; like GET but without body</li>
<li>OPTIONS -&gt; (requires uWSGI 2.1) returns the list of allowed HTTP methods and WebDAV support</li>
<li>PUT -&gt; requires allow_put in mountpoint options, store a resource in ceph: curl -T /etc/services <a class="reference external" href="http://localhost:8080/services">http://localhost:8080/services</a></li>
<li>MKCOL -&gt; requires allow_mkcol in mountpoint options, creates a new pool: curl -X MKCOL <a class="reference external" href="http://localhost:8080/anewpool">http://localhost:8080/anewpool</a> (the pool 'anewpool' will be created)</li>
<li>DELETE -&gt; requires allow_delete in mountpoint options, removes an object</li>
<li>PROPFIND -&gt; requires allow_propfind in mountpoint options (uWSGI 2.1+), implements WebDAV PROPFIND method</li>
</ul>
</div>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="제목 주소">¶</a></h2>
<ul class="simple">
<li>multiprocessing is supported</li>
<li>async support is fully functional, the ugreen suspend engine is the only supported one:</li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="c1">; bind on port 9090</span>
<span class="na">http-socket</span> <span class="o">=</span> <span class="s">:9090</span>
<span class="c1">; set the default modifier1 to the rados one</span>
<span class="na">http-socket-modifier1</span> <span class="o">=</span> <span class="s">28</span>
<span class="c1">; mount our rados pool</span>
<span class="na">rados-mount</span> <span class="o">=</span> <span class="s">mountpoint=/rad/,pool=data,config=/etc/ceph/ceph.conf</span>
<span class="c1">; spawn 1000 async cores</span>
<span class="na">async</span> <span class="o">=</span> <span class="s">1000</span>
<span class="c1">; required !!!</span>
<span class="na">ugreen</span> <span class="o">=</span> <span class="s">true</span>
</pre></div>
</div>
</div>
<div class="section" id="caching-example">
<h2>Caching example<a class="headerlink" href="#caching-example" title="제목 주소">¶</a></h2>
<p>Caching is highly recommended to improve performance and reduce the load on the Ceph cluster. This is a good example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="c1">; create a bitmap cache with max 1000 items storable in 10000 4k blocks</span>
<span class="na">cache2</span> <span class="o">=</span> <span class="s">name=radoscache,items=1000,blocks=10000,blocksize=4096,bitmap=1</span>

<span class="c1">; check every object ending with .html in the &#39;radoscache&#39; cache</span>
<span class="na">route</span> <span class="o">=</span> <span class="s">\.html$ cache:key=${PATH_INFO},name=radoscache,content_type=text/html</span>
<span class="c1">; if not found, store it at the end of the request for 3600 seconds (this will automatically enable Expires header)</span>
<span class="na">route</span> <span class="o">=</span> <span class="s">\.html$ cachestore:key=${PATH_INFO},name=radoscache,expires=3600</span>

<span class="c1">; general options</span>

<span class="c1">; master is always a good idea</span>
<span class="na">master</span> <span class="o">=</span> <span class="s">true</span>
<span class="c1">; bind on http port 9090 (better to use a uwsgi socket behind a proxy like nginx)</span>
<span class="na">http-socket</span> <span class="o">=</span> <span class="s">:9090</span>
<span class="c1">; set the default modifier1 to the rados one</span>
<span class="na">http-socket-modifier1</span> <span class="o">=</span> <span class="s">28</span>
<span class="c1">; mount our rados &#39;htmlpages&#39; pool</span>
<span class="na">rados-mount</span> <span class="o">=</span> <span class="s">mountpoint=/,pool=htmlpages</span>

<span class="c1">; spawn multiple processes and threads</span>
<span class="na">processes</span> <span class="o">=</span> <span class="s">4</span>
<span class="na">threads</span> <span class="o">=</span> <span class="s">8</span>
</pre></div>
</div>
<p>To test the caching behaviour, a tool like uwsgicachetop (<a class="reference external" href="https://pypi.python.org/pypi/uwsgicachetop">https://pypi.python.org/pypi/uwsgicachetop</a>) will be very useful.</p>
<p>More information about caching here: <span class="xref std std-doc">CachingCookbook</span></p>
</div>
<div class="section" id="security-note">
<h2>Security note<a class="headerlink" href="#security-note" title="제목 주소">¶</a></h2>
<p>Enabling MKCOL, PUT and DELETE may be high security risks.</p>
<p>Combine them with the internal routing framework for adding authentication/authorization policies:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="na">master</span> <span class="o">=</span> <span class="s">true</span>
<span class="c1">; bind on http port 9090 (better to use a uwsgi socket behind a proxy like nginx)</span>
<span class="na">http-socket</span> <span class="o">=</span> <span class="s">:9090</span>
<span class="c1">; set the default modifier1 to the rados one</span>
<span class="na">http-socket-modifier1</span> <span class="o">=</span> <span class="s">28</span>
<span class="c1">; mount our rados &#39;htmlpages&#39; pool</span>
<span class="na">rados-mount</span> <span class="o">=</span> <span class="s">mountpoint=/,pool=htmlpages,allow_put=1,allow_mkcol=1</span>

<span class="c1">; spawn multiple processes and threads</span>
<span class="na">processes</span> <span class="o">=</span> <span class="s">4</span>
<span class="na">threads</span> <span class="o">=</span> <span class="s">8</span>

<span class="c1">; permit PUT only to authenticated &#39;foo&#39; user</span>
<span class="na">route-if</span> <span class="o">=</span> <span class="s">equal:${REQUEST_METHOD};PUT basicauth:my secret area,foo:bar</span>

<span class="c1">; allow MKCOL only from 127.0.0.1</span>
<span class="na">route-if</span> <span class="o">=</span> <span class="s">equal:${REQUEST_METHOD};MKCOL goto:check_localhost</span>
<span class="c1">; end of the chain</span>
<span class="na">route-run</span> <span class="o">=</span> <span class="s">last:</span>

<span class="na">route-label</span> <span class="o">=</span> <span class="s">check_localhost</span>
<span class="c1">; if REMOTE_ADDR = 127.0.0.1 -&gt; continue to rados plugin</span>
<span class="na">route-remote-addr</span> <span class="o">=</span> <span class="s">^127\.0\.0\.1$ continue:</span>
<span class="c1">; otherwise break with 403</span>
<span class="na">route-run</span> <span class="o">=</span> <span class="s">break:403 Forbidden</span>
</pre></div>
</div>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="제목 주소">¶</a></h2>
<ul class="simple">
<li>The plugin automatically enables the MIME type engine.</li>
<li>There is no directory index support. It makes no sense in rados/ceph context.</li>
<li>You should drop privileges in your uWSGI instances, so be sure you give the right permissions to the ceph keyring.</li>
<li>If you use it for getting/storing large objects, consider increasing <code class="docutils literal notranslate"><span class="pre">buffer_size</span></code>. 4194304 is very performant value, 1048576 is also good, if you wish to conserve memory.</li>
<li>PUT into Erasure coded pools is supported. <code class="docutils literal notranslate"><span class="pre">put_buffer_size</span></code> is automatically adjusted to satisfy pool alignment requirements.</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Pty.html" class="btn btn-neutral float-right" title="The Pty plugin" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="GlusterFS.html" class="btn btn-neutral" title="The GlusterFS plugin" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2016, uWSGI.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0',
            LANGUAGE:'ko',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>