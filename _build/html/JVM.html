

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ko" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ko" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>JVM in the uWSGI server (updated to 1.9) &mdash; uWSGI 2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="색인" href="genindex.html" />
    <link rel="search" title="검색" href="search.html" />
    <link rel="next" title="The JWSGI interface" href="JWSGI.html" />
    <link rel="prev" title="Using Lua/WSAPI with uWSGI" href="Lua.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> uWSGI
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="WSGIquickstart.html">Quickstart for Python/WSGI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="PSGIquickstart.html">Quickstart for perl/PSGI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="RackQuickstart.html">Quickstart for ruby/Rack applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="Snippets.html">Snippets</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Download.html">Getting uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install.html">Installing uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="BuildSystem.html">The uWSGI build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="Management.html">Managing the uWSGI server</a></li>
<li class="toctree-l1"><a class="reference internal" href="LanguagesAndPlatforms.html">Supported languages and platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="SupportedPlatforms.html">Supported Platforms/Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebServers.html">Web server integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="ThingsToKnow.html">Things to know (best practices and &quot;issues&quot;) READ IT !!!</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration.html">Configuring uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="FallbackConfig.html">Fallback configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConfigLogic.html">Configuration logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="Options.html">uWSGI Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="CustomOptions.html">Defining new options for your instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="ParsingOrder.html">How uWSGI parses config files</a></li>
<li class="toctree-l1"><a class="reference internal" href="Vars.html">uwsgi protocol magic variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="Protocol.html">The uwsgi Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="AttachingDaemons.html">Managing external daemons/services</a></li>
<li class="toctree-l1"><a class="reference internal" href="MasterFIFO.html">The Master FIFO</a></li>
<li class="toctree-l1"><a class="reference internal" href="Inetd.html">Socket activation with inetd/xinetd</a></li>
<li class="toctree-l1"><a class="reference internal" href="Upstart.html">Running uWSGI via Upstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="Systemd.html">Systemd</a></li>
<li class="toctree-l1"><a class="reference internal" href="Circus.html">Running uWSGI instances with Circus</a></li>
<li class="toctree-l1"><a class="reference internal" href="Embed.html">Embedding an application in uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="LogFormat.html">Formatting uWSGI requests logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="LogEncoders.html">Log encoders</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hooks.html">Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="WorkerOverride.html">Overriding Workers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="ThirdPartyPlugins.html">uWSGI third party plugins</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/CachingCookbook.html">The uWSGI Caching Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/Django_and_nginx.html">Setting up Django and your web server with uWSGI and nginx</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/dreamhost.html">Running uWSGI on Dreamhost shared hosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/heroku_python.html">Running python webapps on Heroku with uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/heroku_ruby.html">Running Ruby/Rack webapps on Heroku with uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/ReliableFuse.html">Reliably use FUSE filesystems for uWSGI vassals (with Linux)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/DynamicProxying.html">Build a dynamic proxy using RPC and internal routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/GraphiteAndMetrics.html">Setting up Graphite on Ubuntu using the Metrics subsystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="articles/SerializingAccept.html">Serializing accept(), AKA Thundering Herd, AKA the Zeeg Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/TheArtOfGracefulReloading.html">The Art of Graceful Reloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/FunWithPerlEyetoyRaspberrypi.html">Fun with Perl, Eyetoy and RaspberryPi</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/OffloadingWebsocketsAndSSE.html">Offloading Websockets and Server-Sent Events AKA &quot;Combine them with Django safely&quot;</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/WSGIEnvBehaviour.html">WSGI env behaviour policies</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="AlarmSubsystem.html">The uWSGI alarm subsystem (from 1.3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Caching.html">The uWSGI caching framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebCaching.html">WebCaching framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cron.html">The uWSGI cron-like interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="Fastrouter.html">The uWSGI FastRouter</a></li>
<li class="toctree-l1"><a class="reference internal" href="InternalRouting.html">uWSGI internal routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="Legion.html">The uWSGI Legion subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Locks.html">Locks</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mules.html">uWSGI Mules</a></li>
<li class="toctree-l1"><a class="reference internal" href="OffloadSubsystem.html">The uWSGI offloading subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Queue.html">The uWSGI queue framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="RPC.html">uWSGI RPC Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="SharedArea.html">SharedArea -- share memory pages between uWSGI components</a></li>
<li class="toctree-l1"><a class="reference internal" href="Signals.html">The uWSGI Signal Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Spooler.html">The uWSGI Spooler</a></li>
<li class="toctree-l1"><a class="reference internal" href="SubscriptionServer.html">uWSGI Subscription Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="StaticFiles.html">Serving static files with uWSGI (updated to 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="SNI.html">SNI - Server Name Identification (virtual hosting for SSL nodes)</a></li>
<li class="toctree-l1"><a class="reference internal" href="GeoIP.html">The GeoIP plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="Transformations.html">uWSGI Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebSockets.html">WebSocket support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Metrics.html">The Metrics subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Chunked.html">The Chunked input API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Cheaper.html">The uWSGI cheaper subsystem -- adaptive process spawning</a></li>
<li class="toctree-l1"><a class="reference internal" href="Emperor.html">The uWSGI Emperor -- multi-app deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="Broodlord.html">Auto-scaling with Broodlord mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="Zerg.html">Zerg mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="DynamicApps.html">Adding applications dynamically</a></li>
<li class="toctree-l1"><a class="reference internal" href="SSLScaling.html">Scaling SSL connections (uWSGI 1.9)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Capabilities.html">Setting POSIX Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cgroups.html">Running uWSGI in a Linux CGroup</a></li>
<li class="toctree-l1"><a class="reference internal" href="KSM.html">Using Linux KSM in uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Namespaces.html">Jailing your apps using Linux Namespaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="Namespaces.html#the-old-way-the-namespace-option">The old way: the --namespace option</a></li>
<li class="toctree-l1"><a class="reference internal" href="FreeBSDJails.html">FreeBSD Jails</a></li>
<li class="toctree-l1"><a class="reference internal" href="ForkptyRouter.html">The Forkpty Router</a></li>
<li class="toctree-l1"><a class="reference internal" href="TunTapRouter.html">The TunTap Router</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Nagios.html">Monitoring uWSGI with Nagios</a></li>
<li class="toctree-l1"><a class="reference internal" href="SNMP.html">The embedded SNMP server</a></li>
<li class="toctree-l1"><a class="reference internal" href="PushingStats.html">Pushing statistics (from 1.4)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Carbon.html">Integration with Graphite/Carbon</a></li>
<li class="toctree-l1"><a class="reference internal" href="StatsServer.html">The uWSGI Stats Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="Metrics.html">The Metrics subsystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Async.html">uWSGI asynchronous/non-blocking modes (updated to uWSGI 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Gevent.html">The Gevent loop engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tornado.html">The Tornado loop engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="uGreen.html">uGreen -- uWSGI Green Threads</a></li>
<li class="toctree-l1"><a class="reference internal" href="asyncio.html">The asyncio loop engine (CPython &gt;= 3.4, uWSGI &gt;= 2.0.4)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Apache.html">Apache support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cherokee.html">Cherokee support</a></li>
<li class="toctree-l1"><a class="reference internal" href="HTTP.html">Native HTTP support</a></li>
<li class="toctree-l1"><a class="reference internal" href="HTTPS.html">HTTPS 지원 (1.3 버전부터)</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPDY.html">The SPDY router (uWSGI 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lighttpd.html">Lighttpd support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mongrel2.html">Attaching uWSGI to Mongrel2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Nginx.html">Nginx support</a></li>
<li class="toctree-l1"><a class="reference internal" href="OpenBSDhttpd.html">Using OpenBSD httpd as proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="OpenBSDhttpd.html#notes">Notes</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Python.html">Python support</a></li>
<li class="toctree-l1"><a class="reference internal" href="PyPy.html">The PyPy plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="PHP.html">Running PHP scripts in uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Perl.html">uWSGI Perl support (PSGI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Ruby.html">Ruby support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lua.html">Using Lua/WSAPI with uWSGI</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">JVM in the uWSGI server (updated to 1.9)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="JWSGI.html">The JWSGI interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="Ring.html">The Clojure/Ring JVM request handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-jvm-support">Building the JVM support</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exposing-functions-via-the-rpc-subsystem">Exposing functions via the RPC subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="#registering-signal-handlers">Registering signal handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-fork-problem-and-multithreading">The fork() problem and multithreading</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-does-it-work">How does it work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#passing-options-to-the-jvm">Passing options to the JVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#loading-classes-without-main-method">Loading classes (without main method)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#request-handlers">Request handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Mono.html">The Mono ASP.NET plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="CGI.html">Running CGI scripts on uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="GCCGO.html">The GCCGO plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="Symcall.html">The Symcall plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSLT.html">The XSLT plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="SSI.html">SSI (Server Side Includes) plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="V8.html">uWSGI V8 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="GridFS.html">The GridFS plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="GlusterFS.html">The GlusterFS plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="Rados.html">The RADOS plugin</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Pty.html">The Pty plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPNEGO.html">SPNEGO authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="LDAP.html">Configuring uWSGI with LDAP</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Erlang.html">Integrating uWSGI with Erlang</a></li>
<li class="toctree-l1"><a class="reference internal" href="ManagementFlag.html">Management Flags</a></li>
<li class="toctree-l1"><a class="reference internal" href="Go.html">uWSGI Go support (1.4 only)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.18.html">uWSGI 2.0.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.17.1.html">uWSGI 2.0.17.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.17.html">uWSGI 2.0.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.16.html">uWSGI 2.0.16</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.15.html">uWSGI 2.0.15</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.14.html">uWSGI 2.0.14</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.13.1.html">uWSGI 2.0.13.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.13.html">uWSGI 2.0.13</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.12.html">uWSGI 2.0.12</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.11.2.html">uWSGI 2.0.11.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.11.1.html">uWSGI 2.0.11.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.11.html">uWSGI 2.0.11</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.10.html">uWSGI 2.0.10</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.9.html">uWSGI 2.0.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.8.html">uWSGI 2.0.8</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.7.html">uWSGI 2.0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.6.html">uWSGI 2.0.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.5.html">uWSGI 2.0.5</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.4.html">uWSGI 2.0.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.3.html">uWSGI 2.0.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.2.html">uWSGI 2.0.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.1.html">uWSGI 2.0.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.html">uWSGI 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.21.html">uWSGI 1.9.21</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.20.html">uWSGI 1.9.20</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.19.html">uWSGI 1.9.19</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.18.html">uWSGI 1.9.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.17.html">uWSGI 1.9.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.16.html">uWSGI 1.9.16</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.15.html">uWSGI 1.9.15</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.14.html">uWSGI 1.9.14</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.13.html">uWSGI 1.9.13</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.12.html">uWSGI 1.9.12</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.11.html">uWSGI 1.9.11</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.10.html">uWSGI 1.9.10</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.9.html">uWSGI 1.9.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.8.html">uWSGI 1.9.8</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.7.html">uWSGI 1.9.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.6.html">uWSGI 1.9.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.5.html">uWSGI 1.9.5</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.4.html">uWSGI 1.9.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.3.html">uWSGI 1.9.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.2.html">uWSGI 1.9.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.1.html">uWSGI 1.9.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.html">uWSGI 1.9</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">uWSGI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>JVM in the uWSGI server (updated to 1.9)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/JVM.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="jvm-in-the-uwsgi-server-updated-to-1-9">
<h1>JVM in the uWSGI server (updated to 1.9)<a class="headerlink" href="#jvm-in-the-uwsgi-server-updated-to-1-9" title="제목 주소">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="JWSGI.html">The JWSGI interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="Ring.html">The Clojure/Ring JVM request handler</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="제목 주소">¶</a></h2>
<p>As of uWSGI 1.9, you can have a full, thread-safe and versatile JVM embedded in
the core.  All of the plugins can call JVM functions (written in Java, JRuby,
Jython, Clojure, whatever new fancy language the JVM can run) via the <a class="reference internal" href="RPC.html"><span class="doc">RPC
subsystem</span></a> or using uWSGI <a class="reference internal" href="Signals.html"><span class="doc">The uWSGI Signal Framework</span></a> The JVM plugin itself can
implement request handlers to host JVM-based web applications. Currently
<a class="reference internal" href="JWSGI.html"><span class="doc">The JWSGI interface</span></a> and <a class="reference internal" href="Ring.html"><span class="doc">The Clojure/Ring JVM request handler</span></a> (Clojure) apps are supported. A long-term goal is
supporting servlets, but it will require heavy sponsorship and funding (feel
free to ask for more information about the project at <a class="reference external" href="mailto:info&#37;&#52;&#48;unbit&#46;it">info<span>&#64;</span>unbit<span>&#46;</span>it</a>).</p>
</div>
<div class="section" id="building-the-jvm-support">
<h2>Building the JVM support<a class="headerlink" href="#building-the-jvm-support" title="제목 주소">¶</a></h2>
<p>First of all, be sure to have a full JDK distribution installed.  The uWSGI
build system will try to detect common JDK setups (Debian, Ubuntu, Centos,
OSX...), but if it is not able to find a JDK installation it will need some
information from the user (see below).  To build the JVM plugin simply run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python uwsgiconfig.py --plugin plugins/jvm default
</pre></div>
</div>
<p>Change 'default', if needed, to your alternative build profile. For example if
you have a Perl/PSGI monolithic build just run</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python uwsgiconfig.py --plugin plugins/jvm psgi
</pre></div>
</div>
<p>or for a fully-modular build</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python uwsgiconfig.py --plugin plugins/jvm core
</pre></div>
</div>
<p>If all goes well the jvm_plugin will be built.  If the build system cannot find
a JDK installation you will ned to specify the path of the headers directory
(the directory containing the jni.h file) and the lib directory (the directory
containing libjvm.so).  As an example, if jni.h is in /opt/java/includes and
libjvm.so is in /opt/java/lib/jvm/i386, run the build system in that way:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">UWSGICONFIG_JVM_INCPATH</span><span class="o">=</span>/opt/java/includes <span class="nv">UWSGICONFIG_JVM_LIBPATH</span><span class="o">=</span>/opt/java/lib/jvm/i386 python uwsgiconfig --plugin plugins/jvm
</pre></div>
</div>
<p>After a successful build, you will get the path of the uwsgi.jar file.  That
jarball contains classes to access the uWSGI API, and you should copy it into
your CLASSPATH or at the very least manually load it from uWSGI's
configuration.</p>
</div>
<div class="section" id="exposing-functions-via-the-rpc-subsystem">
<h2>Exposing functions via the RPC subsystem<a class="headerlink" href="#exposing-functions-via-the-rpc-subsystem" title="제목 주소">¶</a></h2>
<p>In this example we will export a &quot;hello&quot; Java function (returning a string) and
we will call it from a Python WSGI application.  This is our base configuration
(we assume a modular build).</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="na">plugins</span> <span class="o">=</span> <span class="s">python,jvm</span>
<span class="na">http</span> <span class="o">=</span> <span class="s">:9090</span>
<span class="na">wsgi-file</span> <span class="o">=</span> <span class="s">myapp.py</span>
<span class="na">jvm-classpath</span> <span class="o">=</span> <span class="s">/opt/uwsgi/lib/uwsgi.jar</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">jvm-classpath</span></code> is an option exported by the JVM plugin that allows you
to add directories or jarfiles to your classpath. You can specify as many
<code class="docutils literal notranslate"><span class="pre">jvm-classpath</span></code> options you need.  Here we are manually adding <code class="docutils literal notranslate"><span class="pre">uwsgi.jar</span></code>
as we did not copy it into our CLASSPATH.  This is our WSGI example script.</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">uwsgi</span>

<span class="k">def</span> <span class="nf">application</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">):</span>
    <span class="n">start_response</span><span class="p">(</span><span class="s1">&#39;200 OK&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span><span class="s1">&#39;text/html&#39;</span><span class="p">)])</span>
    <span class="k">yield</span> <span class="s2">&quot;&lt;h1&gt;&quot;</span>
    <span class="k">yield</span> <span class="n">uwsgi</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="s2">&quot;&lt;/h1&gt;&quot;</span>
</pre></div>
</div>
<p>Here we use <code class="docutils literal notranslate"><span class="pre">uwsgi.call()</span></code> instead of <code class="docutils literal notranslate"><span class="pre">uwsgi.rpc()</span></code> as a shortcut (little
performance gain in options parsing).  We now create our Foobar.java class. Its
<code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">void</span> <span class="pre">main()</span></code> function will be run by uWSGI on startup.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foobar</span> <span class="o">{</span>
   <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span>

       <span class="c1">// create an anonymous function</span>
       <span class="n">uwsgi</span><span class="o">.</span><span class="na">RpcFunction</span> <span class="n">rpc_func</span> <span class="o">=</span> <span class="k">new</span> <span class="n">uwsgi</span><span class="o">.</span><span class="na">RpcFunction</span><span class="o">()</span> <span class="o">{</span>
           <span class="kd">public</span> <span class="n">String</span> <span class="nf">function</span><span class="o">(</span><span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
               <span class="k">return</span> <span class="s">&quot;Hello World&quot;</span><span class="o">;</span>
           <span class="o">}</span>
       <span class="o">};</span>

       <span class="c1">// register it in the uWSGI RPC subsystem</span>
       <span class="n">uwsgi</span><span class="o">.</span><span class="na">register_rpc</span><span class="o">(</span><span class="s">&quot;hello&quot;</span><span class="o">,</span> <span class="n">rpc_func</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">uwsgi.RpcFunction</span></code> interface allows you to easily write uWSGI-compliant
RPC functions.  Now compile the Foobar.java file:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>javac Foobar.java
</pre></div>
</div>
<p>(eventually fix the classpath or pass the uwsgi.jar path with the -cp option)
You now have a Foobar.class that can be loaded by uWSGI. Let's complete the
configuration...</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="na">plugins</span> <span class="o">=</span> <span class="s">python,jvm</span>
<span class="na">http</span> <span class="o">=</span> <span class="s">:9090</span>
<span class="na">wsgi-file</span> <span class="o">=</span> <span class="s">myapp.py</span>
<span class="na">jvm-classpath</span> <span class="o">=</span> <span class="s">/opt/uwsgi/lib/uwsgi.jar</span>
<span class="na">jvm-main-class</span> <span class="o">=</span> <span class="s">Foobar</span>
</pre></div>
</div>
<p>The last option (<code class="docutils literal notranslate"><span class="pre">jvm-main-class</span></code>) will load a java class and will execute
its <code class="docutils literal notranslate"><span class="pre">main()</span></code> method.  We can now visit localhost:9090 and we should see the
Hello World message.</p>
</div>
<div class="section" id="registering-signal-handlers">
<h2>Registering signal handlers<a class="headerlink" href="#registering-signal-handlers" title="제목 주소">¶</a></h2>
<p>In the same way as the RPC subsystem you can register signal handlers.  You
will be able to call Java functions on time events, file modifications, cron...
Our Sigbar.java:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Sigbar</span> <span class="o">{</span>
   <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span>

       <span class="c1">// create an anonymous function</span>
       <span class="n">uwsgi</span><span class="o">.</span><span class="na">SignalHandler</span> <span class="n">sh</span> <span class="o">=</span> <span class="k">new</span> <span class="n">uwsgi</span><span class="o">.</span><span class="na">SignalHandler</span><span class="o">()</span> <span class="o">{</span>
           <span class="kd">public</span> <span class="kt">void</span> <span class="nf">function</span><span class="o">(</span><span class="kt">int</span> <span class="n">signum</span><span class="o">)</span> <span class="o">{</span>
               <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Hi, i am the signal &quot;</span> <span class="o">+</span> <span class="n">signum</span><span class="o">);</span>
           <span class="o">}</span>
       <span class="o">};</span>

       <span class="c1">// register it in the uWSGI signal subsystem</span>
       <span class="n">uwsgi</span><span class="o">.</span><span class="na">register_signal</span><span class="o">(</span><span class="mi">17</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">,</span> <span class="n">sh</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">uwsgi.SignalHandler</span></code> is the interface for signal handlers.</p>
<p>Whenever signal 17 is rased, the corresponding JVM function will be run.
Remember to compile the file, load it in uWSGI and to enable to master process
(without it the signal subsystem will not work).</p>
</div>
<div class="section" id="the-fork-problem-and-multithreading">
<h2>The fork() problem and multithreading<a class="headerlink" href="#the-fork-problem-and-multithreading" title="제목 주소">¶</a></h2>
<p>The JVM is not <code class="docutils literal notranslate"><span class="pre">fork()</span></code> friendly. If you load a virtual machine in the master
and then you fork() (like generally you do in other languages) the children JVM
will be broken (this is mainly because threads required by the JVM are not
inherited).  For that reason a JVM for each worker, mule and spooler is
spawned.  Fortunately enough, differently from the vast majority of other
platforms, the JVM has truly powerful multithreading support.  uWSGI supports
it, so if you want to run one of the request handlers (JWSGI, Clojure/Ring)
just remember to spawn a number of threads with the <code class="docutils literal notranslate"><span class="pre">--threads</span></code> option.</p>
</div>
<div class="section" id="how-does-it-work">
<h2>How does it work?<a class="headerlink" href="#how-does-it-work" title="제목 주소">¶</a></h2>
<p>uWSGI embeds the JVM using the JNI interface. Unfortunately we cannot rely on
JVM's automatic garbage collector, so we have to manually unreference all of
the allocated objects. This is not a problem from a performance and usage point
of view, but makes the development of plugins a bit more difficult compared to
other JNI-based products.  Fortunately the current API simplifies that task.</p>
</div>
<div class="section" id="passing-options-to-the-jvm">
<h2>Passing options to the JVM<a class="headerlink" href="#passing-options-to-the-jvm" title="제목 주소">¶</a></h2>
<p>You can pass specific options to the JVM using the <code class="docutils literal notranslate"><span class="pre">--jvm-opt</span></code> option.</p>
<p>For example to limit heap usage to 10 megabytes:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="na">...</span>
<span class="na">jvm-opt</span> <span class="o">=</span> <span class="s">-Xmx10m</span>
</pre></div>
</div>
</div>
<div class="section" id="loading-classes-without-main-method">
<h2>Loading classes (without main method)<a class="headerlink" href="#loading-classes-without-main-method" title="제목 주소">¶</a></h2>
<p>We have already seen how to load classes and run their <code class="docutils literal notranslate"><span class="pre">main()</span></code> method on
startup.  Often you will want to load classes only to add them to the JVM
(allowing access to external modules needing them) To load a class you can use
<code class="docutils literal notranslate"><span class="pre">--jvm-class</span></code>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="na">...</span>
<span class="na">jvm-class</span> <span class="o">=</span> <span class="s">Foobar</span>
<span class="na">jvm-class</span> <span class="o">=</span> <span class="s">org/unbit/Unbit</span>
</pre></div>
</div>
<p>Remember class names must use the '/' format instead of dots! This rule applies
to <code class="docutils literal notranslate"><span class="pre">--jvm-main-class</span></code> too.</p>
</div>
<div class="section" id="request-handlers">
<h2>Request handlers<a class="headerlink" href="#request-handlers" title="제목 주소">¶</a></h2>
<p>Although the Java(TM) world has its J2EE environment for deploying web
applications, you may want to follow a different approach.  The uWSGI project
implements lot of features that are not part of J2EE (and does not implement
lot of features that are a strong part of J2EE), so you may find its approach
more suited for your setup (or taste, or skills).</p>
<p>The JVM plugin exports an API to allow hooking web requests. This approach
differs a bit from &quot;classic&quot; way uWSGI works.  The JVM plugin registers itself
as a handler for modifier1==8, but will look at the modifier2 value to know
which of its request handlers has to manage it.  For example the <a class="reference internal" href="Ring.html"><span class="doc">The Clojure/Ring JVM request handler</span></a>
plugin registers itself in the JVM plugin as the modifier2 number '1'.  So to
pass requests to it you need something like that:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="na">http</span> <span class="o">=</span> <span class="s">:9090</span>
<span class="na">http-modifier1</span> <span class="o">=</span> <span class="s">8</span>
<span class="na">http-modifier2</span> <span class="o">=</span> <span class="s">1</span>
</pre></div>
</div>
<p>or with nginx:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
    <span class="n">include</span> <span class="n">uwsgi_params</span><span class="p">;</span>
    <span class="n">uwsgi_modifier1</span> <span class="mi">8</span><span class="p">;</span>
    <span class="n">uwsgi_modifier2</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">uwsgi_pass</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">uwsgi</span><span class="p">.</span><span class="n">socket</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Currently there are 2 JVM request handlers available:</p>
<ul class="simple">
<li><a class="reference internal" href="JWSGI.html"><span class="doc">The JWSGI interface</span></a></li>
<li><a class="reference internal" href="Ring.html"><span class="doc">The Clojure/Ring JVM request handler</span></a> (for Clojure)</li>
</ul>
<p>As already said, the idea of developing a servlet request handler is there, but
it will require a sponsorship (aka. money) as it'll be a really big effort.</p>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="제목 주소">¶</a></h2>
<ul class="simple">
<li>You do not need special jar files to use UNIX sockets -- the JVM plugin has
access to all of the uWSGI features.</li>
<li>You may be addicted to the log4j module. There is nothing wrong with it, but
do take a look at uWSGI's logging capabilities (less resources needed, less
configuration, and more NoEnterprise)</li>
<li>The uWSGI API access is still incomplete (will be updated after 1.9)</li>
<li>The JVM does not play well in environments with limited address space. Avoid
using <code class="docutils literal notranslate"><span class="pre">--limit-as</span></code> if you load the JVM in your instances.</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="JWSGI.html" class="btn btn-neutral float-right" title="The JWSGI interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Lua.html" class="btn btn-neutral" title="Using Lua/WSAPI with uWSGI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2016, uWSGI.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0',
            LANGUAGE:'ko',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>