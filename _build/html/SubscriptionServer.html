

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ko" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ko" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>uWSGI Subscription Server &mdash; uWSGI 2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="색인" href="genindex.html" />
    <link rel="search" title="검색" href="search.html" />
    <link rel="next" title="Serving static files with uWSGI (updated to 1.9)" href="StaticFiles.html" />
    <link rel="prev" title="The uWSGI Spooler" href="Spooler.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> uWSGI
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="WSGIquickstart.html">Quickstart for Python/WSGI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="PSGIquickstart.html">Quickstart for perl/PSGI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="RackQuickstart.html">Quickstart for ruby/Rack applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="Snippets.html">Snippets</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Download.html">Getting uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install.html">Installing uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="BuildSystem.html">The uWSGI build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="Management.html">Managing the uWSGI server</a></li>
<li class="toctree-l1"><a class="reference internal" href="LanguagesAndPlatforms.html">Supported languages and platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="SupportedPlatforms.html">Supported Platforms/Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebServers.html">Web server integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="ThingsToKnow.html">Things to know (best practices and &quot;issues&quot;) READ IT !!!</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration.html">Configuring uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="FallbackConfig.html">Fallback configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConfigLogic.html">Configuration logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="Options.html">uWSGI Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="CustomOptions.html">Defining new options for your instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="ParsingOrder.html">How uWSGI parses config files</a></li>
<li class="toctree-l1"><a class="reference internal" href="Vars.html">uwsgi protocol magic variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="Protocol.html">The uwsgi Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="AttachingDaemons.html">Managing external daemons/services</a></li>
<li class="toctree-l1"><a class="reference internal" href="MasterFIFO.html">The Master FIFO</a></li>
<li class="toctree-l1"><a class="reference internal" href="Inetd.html">Socket activation with inetd/xinetd</a></li>
<li class="toctree-l1"><a class="reference internal" href="Upstart.html">Running uWSGI via Upstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="Systemd.html">Systemd</a></li>
<li class="toctree-l1"><a class="reference internal" href="Circus.html">Running uWSGI instances with Circus</a></li>
<li class="toctree-l1"><a class="reference internal" href="Embed.html">Embedding an application in uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="LogFormat.html">Formatting uWSGI requests logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="LogEncoders.html">Log encoders</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hooks.html">Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="WorkerOverride.html">Overriding Workers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="ThirdPartyPlugins.html">uWSGI third party plugins</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/CachingCookbook.html">The uWSGI Caching Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/Django_and_nginx.html">Setting up Django and your web server with uWSGI and nginx</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/dreamhost.html">Running uWSGI on Dreamhost shared hosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/heroku_python.html">Running python webapps on Heroku with uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/heroku_ruby.html">Running Ruby/Rack webapps on Heroku with uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/ReliableFuse.html">Reliably use FUSE filesystems for uWSGI vassals (with Linux)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/DynamicProxying.html">Build a dynamic proxy using RPC and internal routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/GraphiteAndMetrics.html">Setting up Graphite on Ubuntu using the Metrics subsystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="articles/SerializingAccept.html">Serializing accept(), AKA Thundering Herd, AKA the Zeeg Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/TheArtOfGracefulReloading.html">The Art of Graceful Reloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/FunWithPerlEyetoyRaspberrypi.html">Fun with Perl, Eyetoy and RaspberryPi</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/OffloadingWebsocketsAndSSE.html">Offloading Websockets and Server-Sent Events AKA &quot;Combine them with Django safely&quot;</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/WSGIEnvBehaviour.html">WSGI env behaviour policies</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="AlarmSubsystem.html">The uWSGI alarm subsystem (from 1.3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Caching.html">The uWSGI caching framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebCaching.html">WebCaching framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cron.html">The uWSGI cron-like interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="Fastrouter.html">The uWSGI FastRouter</a></li>
<li class="toctree-l1"><a class="reference internal" href="InternalRouting.html">uWSGI internal routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="Legion.html">The uWSGI Legion subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Locks.html">Locks</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mules.html">uWSGI Mules</a></li>
<li class="toctree-l1"><a class="reference internal" href="OffloadSubsystem.html">The uWSGI offloading subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Queue.html">The uWSGI queue framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="RPC.html">uWSGI RPC Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="SharedArea.html">SharedArea -- share memory pages between uWSGI components</a></li>
<li class="toctree-l1"><a class="reference internal" href="Signals.html">The uWSGI Signal Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Spooler.html">The uWSGI Spooler</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">uWSGI Subscription Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#securing-the-subscription-system">Securing the Subscription System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-ssh-keys">Using SSH keys</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#subscribe2">--subscribe2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notifications">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mountpoints-uwsgi-2-1">Mountpoints (uWSGI 2.1)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="StaticFiles.html">Serving static files with uWSGI (updated to 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="SNI.html">SNI - Server Name Identification (virtual hosting for SSL nodes)</a></li>
<li class="toctree-l1"><a class="reference internal" href="GeoIP.html">The GeoIP plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="Transformations.html">uWSGI Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebSockets.html">WebSocket support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Metrics.html">The Metrics subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Chunked.html">The Chunked input API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Cheaper.html">The uWSGI cheaper subsystem -- adaptive process spawning</a></li>
<li class="toctree-l1"><a class="reference internal" href="Emperor.html">The uWSGI Emperor -- multi-app deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="Broodlord.html">Auto-scaling with Broodlord mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="Zerg.html">Zerg mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="DynamicApps.html">Adding applications dynamically</a></li>
<li class="toctree-l1"><a class="reference internal" href="SSLScaling.html">Scaling SSL connections (uWSGI 1.9)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Capabilities.html">Setting POSIX Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cgroups.html">Running uWSGI in a Linux CGroup</a></li>
<li class="toctree-l1"><a class="reference internal" href="KSM.html">Using Linux KSM in uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Namespaces.html">Jailing your apps using Linux Namespaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="Namespaces.html#the-old-way-the-namespace-option">The old way: the --namespace option</a></li>
<li class="toctree-l1"><a class="reference internal" href="FreeBSDJails.html">FreeBSD Jails</a></li>
<li class="toctree-l1"><a class="reference internal" href="ForkptyRouter.html">The Forkpty Router</a></li>
<li class="toctree-l1"><a class="reference internal" href="TunTapRouter.html">The TunTap Router</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Nagios.html">Monitoring uWSGI with Nagios</a></li>
<li class="toctree-l1"><a class="reference internal" href="SNMP.html">The embedded SNMP server</a></li>
<li class="toctree-l1"><a class="reference internal" href="PushingStats.html">Pushing statistics (from 1.4)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Carbon.html">Integration with Graphite/Carbon</a></li>
<li class="toctree-l1"><a class="reference internal" href="StatsServer.html">The uWSGI Stats Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="Metrics.html">The Metrics subsystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Async.html">uWSGI asynchronous/non-blocking modes (updated to uWSGI 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Gevent.html">The Gevent loop engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tornado.html">The Tornado loop engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="uGreen.html">uGreen -- uWSGI Green Threads</a></li>
<li class="toctree-l1"><a class="reference internal" href="asyncio.html">The asyncio loop engine (CPython &gt;= 3.4, uWSGI &gt;= 2.0.4)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Apache.html">Apache support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cherokee.html">Cherokee support</a></li>
<li class="toctree-l1"><a class="reference internal" href="HTTP.html">Native HTTP support</a></li>
<li class="toctree-l1"><a class="reference internal" href="HTTPS.html">HTTPS 지원 (1.3 버전부터)</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPDY.html">The SPDY router (uWSGI 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lighttpd.html">Lighttpd support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mongrel2.html">Attaching uWSGI to Mongrel2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Nginx.html">Nginx support</a></li>
<li class="toctree-l1"><a class="reference internal" href="OpenBSDhttpd.html">Using OpenBSD httpd as proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="OpenBSDhttpd.html#notes">Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Python.html">Python support</a></li>
<li class="toctree-l1"><a class="reference internal" href="PyPy.html">The PyPy plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="PHP.html">Running PHP scripts in uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Perl.html">uWSGI Perl support (PSGI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Ruby.html">Ruby support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lua.html">Using Lua/WSAPI with uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="JVM.html">JVM in the uWSGI server (updated to 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mono.html">The Mono ASP.NET plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="CGI.html">Running CGI scripts on uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="GCCGO.html">The GCCGO plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="Symcall.html">The Symcall plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSLT.html">The XSLT plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="SSI.html">SSI (Server Side Includes) plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="V8.html">uWSGI V8 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="GridFS.html">The GridFS plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="GlusterFS.html">The GlusterFS plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="Rados.html">The RADOS plugin</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Pty.html">The Pty plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPNEGO.html">SPNEGO authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="LDAP.html">Configuring uWSGI with LDAP</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Erlang.html">Integrating uWSGI with Erlang</a></li>
<li class="toctree-l1"><a class="reference internal" href="ManagementFlag.html">Management Flags</a></li>
<li class="toctree-l1"><a class="reference internal" href="Go.html">uWSGI Go support (1.4 only)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.18.html">uWSGI 2.0.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.17.1.html">uWSGI 2.0.17.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.17.html">uWSGI 2.0.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.16.html">uWSGI 2.0.16</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.15.html">uWSGI 2.0.15</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.14.html">uWSGI 2.0.14</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.13.1.html">uWSGI 2.0.13.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.13.html">uWSGI 2.0.13</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.12.html">uWSGI 2.0.12</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.11.2.html">uWSGI 2.0.11.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.11.1.html">uWSGI 2.0.11.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.11.html">uWSGI 2.0.11</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.10.html">uWSGI 2.0.10</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.9.html">uWSGI 2.0.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.8.html">uWSGI 2.0.8</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.7.html">uWSGI 2.0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.6.html">uWSGI 2.0.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.5.html">uWSGI 2.0.5</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.4.html">uWSGI 2.0.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.3.html">uWSGI 2.0.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.2.html">uWSGI 2.0.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.1.html">uWSGI 2.0.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.html">uWSGI 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.21.html">uWSGI 1.9.21</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.20.html">uWSGI 1.9.20</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.19.html">uWSGI 1.9.19</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.18.html">uWSGI 1.9.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.17.html">uWSGI 1.9.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.16.html">uWSGI 1.9.16</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.15.html">uWSGI 1.9.15</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.14.html">uWSGI 1.9.14</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.13.html">uWSGI 1.9.13</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.12.html">uWSGI 1.9.12</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.11.html">uWSGI 1.9.11</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.10.html">uWSGI 1.9.10</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.9.html">uWSGI 1.9.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.8.html">uWSGI 1.9.8</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.7.html">uWSGI 1.9.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.6.html">uWSGI 1.9.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.5.html">uWSGI 1.9.5</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.4.html">uWSGI 1.9.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.3.html">uWSGI 1.9.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.2.html">uWSGI 1.9.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.1.html">uWSGI 1.9.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.html">uWSGI 1.9</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">uWSGI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>uWSGI Subscription Server</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/SubscriptionServer.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="uwsgi-subscription-server">
<h1>uWSGI Subscription Server<a class="headerlink" href="#uwsgi-subscription-server" title="제목 주소">¶</a></h1>
<p>Some components of the uWSGI stack require a key-value mapping system.</p>
<p>For example the <a class="reference internal" href="Fastrouter.html"><span class="doc">The uWSGI FastRouter</span></a> needs to know which server to contact for a specific request.</p>
<p>In big networks with a lot of nodes manually managing this configuration could be a real hell.
uWSGI implements a subscription system where the node itself announces its presence to Subscription Servers, which will in turn populate their internal dictionaries.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --fastrouter :1717 --fastrouter-subscription-server <span class="m">192</span>.168.0.100:2626
</pre></div>
</div>
<p>This will run an uWSGI fastrouter on port 1717 and create an empty dictionary where the hostname is the key and the uwsgi address is the value.</p>
<p>To populate this dictionary you can contact 192.168.0.100:2626, the address of the subscription server.</p>
<p>For every key multiple addresses can exist, enabling load balancing (various algorithms are available).</p>
<p>A node can announce its presence to a Subscription Server using the <code class="docutils literal notranslate"><span class="pre">subscribe-to</span></code> or <code class="docutils literal notranslate"><span class="pre">subscribe2</span></code> options.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --socket <span class="m">192</span>.168.0.10:3031 --wsgi myapp -M --subscribe-to <span class="m">192</span>.168.0.100:2626:uwsgi.it
</pre></div>
</div>
<p>The FastRouter will map every request for uwsgi.it to 192.168.0.10:3031.</p>
<p>To now add a second node for uwsgi.it simply run it and subscribe:</p>
<div class="highlight-xxx notranslate"><div class="highlight"><pre><span></span>uwsgi --socket 192.168.0.11:3031 --wsgi myapp --master --subscribe-to 192.168.0.100:2626:uwsgi.it
</pre></div>
</div>
<p>Dead nodes are automatically removed from the pool.</p>
<p>The syntax for <code class="docutils literal notranslate"><span class="pre">subscribe2</span></code> is similar but it allows far more control since it allows to specify additional options like the address to which all requests should be forwarded. Its value syntax is a string with &quot;key=value&quot; pairs, each separated by a comma.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi -s <span class="m">192</span>.168.0.10:3031 --wsgi myapp --master --subscribe2 <span class="nv">server</span><span class="o">=</span><span class="m">192</span>.168.0.100:2626,key<span class="o">=</span>uwsgi.it,addr<span class="o">=</span><span class="m">192</span>.168.0.10:3031
</pre></div>
</div>
<p>For a list of the available <code class="docutils literal notranslate"><span class="pre">subscribe2</span></code> keys, see below.</p>
<p>The subscription system is currently available for cluster joining (when multicast/broadcast is not available), the Fastrouter, the HTTP/HTTPS/SPDY router, the rawrouter and the sslrouter.</p>
<p>That said, you can create an evented/fast_as_hell HTTP load balancer in no time.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --http :80 --http-subscription-server <span class="m">192</span>.168.0.100:2626 --master
</pre></div>
</div>
<p>Now simply subscribe your nodes to the HTTP subscription server.</p>
<p>You can check the subscription server stats and/or the subscribed nodes through the <code class="docutils literal notranslate"><span class="pre">http-stats-server</span></code> option.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --http :80 --http-subscription-server <span class="m">192</span>.168.0.100:2626 --http-stats-server <span class="m">192</span>.168.0.100:5004 --master
</pre></div>
</div>
<p>You can also forward subscription requests to another server with the option <code class="docutils literal notranslate"><span class="pre">http-resubscribe</span></code>.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --http :80 --http-subscription-server <span class="m">192</span>.168.0.100:2626 --http-resubscribe <span class="m">192</span>.168.0.101:2627 --master
</pre></div>
</div>
<div class="section" id="securing-the-subscription-system">
<h2>Securing the Subscription System<a class="headerlink" href="#securing-the-subscription-system" title="제목 주소">¶</a></h2>
<p>The subscription system is meant for &quot;trusted&quot; networks. All of the nodes in your network can potentially make a total mess with it.</p>
<p>If you are building an infrastructure for untrusted users or you simply need more control over who can subscribe to a Subscription Server you can use openssl rsa public/private key pairs for &quot;signing&quot; you subscription requests.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># First, create the private key for the subscriber. DO NOT SET A PASSPHRASE FOR THIS KEY.</span>
openssl genrsa -out private.pem
<span class="c1"># Generate the public key for the subscription server:</span>
openssl rsa -pubout -out test.uwsgi.it_8000.pem -in private.pem
</pre></div>
</div>
<p>The keys must be named after the domain/key we are subscribing to serve, plus the .pem extension.</p>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last">If you're subscribing to a pool for an application listening on a specified port you need to use the <code class="docutils literal notranslate"><span class="pre">domain_port.pem</span></code> scheme for your key files. Generally all of the DNS-allowed chars are supported, all of the others are mapped to an underscore.</p>
</div>
<p>An example of an RSA protected server looks like this:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="na">master</span> <span class="o">=</span> <span class="s">1</span>
<span class="na">http</span> <span class="o">=</span> <span class="s">:8000</span>
<span class="na">http-subscription-server</span> <span class="o">=</span> <span class="s">127.0.0.1:2626</span>
<span class="na">subscriptions-sign-check</span> <span class="o">=</span> <span class="s">SHA1:/etc/uwsgi/keys</span>
</pre></div>
</div>
<p>The last line tells uWSGI that public key files will be stored in /etc/uwsgi/keys.</p>
<p>At each subscription request the server will check for the availability of the public key file and use it, if available, to verify the signature of the packet. Packets that do not correctly verify are rejected.</p>
<p>On the client side you need to pass your private key along with other <code class="docutils literal notranslate"><span class="pre">subscribe-to</span></code> options. Here's an example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[uwsgi]</span>
<span class="na">socket</span> <span class="o">=</span> <span class="s">127.0.0.1:8080</span>
<span class="na">subscribe-to</span> <span class="o">=</span> <span class="s">127.0.0.1:2626:test.uwsgi.it:8000,5,SHA1:/home/foobar/private.pem</span>
<span class="na">psgi</span> <span class="o">=</span> <span class="s">test.psgi</span>
</pre></div>
</div>
<p>Let's analyze the <code class="docutils literal notranslate"><span class="pre">subscribe-to</span></code> usage:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">127.0.0.1:2626</span></code> is the subscription server we want to subscribe to.</li>
<li><code class="docutils literal notranslate"><span class="pre">test.uwsgi.it:8000</span></code> is the subscription key.</li>
<li><code class="docutils literal notranslate"><span class="pre">5</span></code> is the modifier1 value for our psgi app</li>
<li><code class="docutils literal notranslate"><span class="pre">SHA1:/home/private/test.uwsgi.it_8000.pem</span></code> is the &lt;digest&gt;:&lt;rsa&gt; couple for authenticating to the server (the &lt;rsa&gt; field is the private key path).</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last">Please make sure you're using the same digest method (SHA1 in the examples above) both on the server and on the client.</p>
</div>
<p>To avoid replay attacks, each subscription packet has an increasing number (normally the unix time) avoiding the allowance of duplicated packets.
Even if an attacker manages to sniff a subscription packet it will be unusable as it is already processed previously.
Obviously if someone manages to steal your private key he will be able to build forged packets.</p>
<div class="section" id="using-ssh-keys">
<h3>Using SSH keys<a class="headerlink" href="#using-ssh-keys" title="제목 주소">¶</a></h3>
<p>SSH-formatted keys are generally loved by developers (well, more than classic PEM files).</p>
<p>Both --subscribe-to and --subscribe2 (see below) support SSH private keys, while for the server part you have the encode the public key in pkcs8:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>ssh-keygen -f chiavessh001.pub -e -m pkcs8
</pre></div>
</div>
</div>
</div>
<div class="section" id="subscribe2">
<h2>--subscribe2<a class="headerlink" href="#subscribe2" title="제목 주소">¶</a></h2>
<p>This is the keyval version of --subscribe-to. It supports more tricks and a (generally) more readable syntax:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --socket <span class="m">127</span>.*:0 --subscribe2 <span class="nv">server</span><span class="o">=</span><span class="m">127</span>.0.0.1:7171,key<span class="o">=</span>ubuntu64.local:9090,sign<span class="o">=</span>SHA1:chiavessh001
</pre></div>
</div>
<p>Supported fields are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">server</span></code> the address of the subscription server</li>
<li><code class="docutils literal notranslate"><span class="pre">key</span></code> the key to subscribe (generally the domain name)</li>
<li><code class="docutils literal notranslate"><span class="pre">addr</span></code> the address to subscribe (the value of the item)</li>
<li><code class="docutils literal notranslate"><span class="pre">socket</span></code> the socket number (zero-based), this is like 'addr' by take the uWSGI internal socket number</li>
<li><code class="docutils literal notranslate"><span class="pre">weight</span></code> the load balancing value</li>
<li><code class="docutils literal notranslate"><span class="pre">modifier1</span></code> and <code class="docutils literal notranslate"><span class="pre">modifier2</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">sign</span></code> &lt;algo&gt;:&lt;file&gt; the signature for the secured system</li>
<li><code class="docutils literal notranslate"><span class="pre">check</span></code> it takes a file as argument. If it exists the packet is sent, otherwise it is skipped</li>
<li><code class="docutils literal notranslate"><span class="pre">sni_key</span></code> set the keyfile to use for SNI proxy management</li>
<li><code class="docutils literal notranslate"><span class="pre">sni_crt</span></code> set the crt file to use for SNI proxy management</li>
<li><code class="docutils literal notranslate"><span class="pre">sni_ca</span></code> set the ca file to use for SNI proxy management</li>
<li><code class="docutils literal notranslate"><span class="pre">algo</span></code> (uWSGI 2.1) set the load balancing algorithm to use (they are pluggable, included are wrr, lrc, wlrc and iphash)</li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code> (uWSGI 2.1) the protocol to use, by default it is 'uwsgi'</li>
<li><code class="docutils literal notranslate"><span class="pre">backup</span></code> (uWSGI 2.1) set the backup level (change meaning based on algo)</li>
</ul>
</div>
<div class="section" id="notifications">
<h2>Notifications<a class="headerlink" href="#notifications" title="제목 주소">¶</a></h2>
<p>When you subscribe to a server, you can ask it to &quot;acknowledge&quot; the acceptance of your request.</p>
<p>Just add <code class="docutils literal notranslate"><span class="pre">--subscription-notify-socket</span> <span class="pre">&lt;addr&gt;</span></code> pointing to a datagram (Unix or UDP) address, on which your instance will bind and the subscription server will send acknowledgements to.</p>
</div>
<div class="section" id="mountpoints-uwsgi-2-1">
<h2>Mountpoints (uWSGI 2.1)<a class="headerlink" href="#mountpoints-uwsgi-2-1" title="제목 주소">¶</a></h2>
<p>Generally you subscribe your apps to specific domains.</p>
<p>Thanks to the mountpoint support introduced in uWSGI 2.1, you can now subscribe each node to a specific directory (you need to specify how much levels you want to support):</p>
<p>First of all you need to tell the subscription server to accept (and manage) mountpoint requests:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --master --http :8080 --http-subscription-server <span class="m">127</span>.0.0.1:4040 --subscription-mountpoints <span class="m">1</span>
</pre></div>
</div>
<p>Then you can start subscribing to mountpoints.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --socket <span class="m">127</span>.0.0.1:0 --subscribe2 <span class="nv">server</span><span class="o">=</span><span class="m">127</span>.0.0.1:4040,key<span class="o">=</span>mydomain.it/foo
uwsgi --socket <span class="m">127</span>.0.0.1:0 --subscribe2 <span class="nv">server</span><span class="o">=</span><span class="m">127</span>.0.0.1:4040,key<span class="o">=</span>mydomain.it/bar
uwsgi --socket <span class="m">127</span>.0.0.1:0 --subscribe2 <span class="nv">server</span><span class="o">=</span><span class="m">127</span>.0.0.1:4040,key<span class="o">=</span>mydomain.it/foo
uwsgi --socket <span class="m">127</span>.0.0.1:0 --subscribe2 <span class="nv">server</span><span class="o">=</span><span class="m">127</span>.0.0.1:4040,key<span class="o">=</span>mydomain.it
</pre></div>
</div>
<p>The first and the third instance will answer to all of the requests for /foo, the second will answer for /bar and the last one will manage all of the others.</p>
<p>For the secured subscription system, you only need to use the domain key (you do not need to generate a certificate for each mountpoint).</p>
<p>If you want to support mountpoints in the form /one/two instead of /one, just pass '2' to --subscription-mountpoints and so on. For performance reason you need to choose how much elements your path can support, and you cannot mix them (read: if --subscription-mountpoints is 2 you can support /one/two or /foo/bar but not /foobar)</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="StaticFiles.html" class="btn btn-neutral float-right" title="Serving static files with uWSGI (updated to 1.9)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Spooler.html" class="btn btn-neutral" title="The uWSGI Spooler" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2016, uWSGI.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0',
            LANGUAGE:'ko',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>