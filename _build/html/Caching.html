

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ko" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ko" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The uWSGI caching framework &mdash; uWSGI 2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="색인" href="genindex.html" />
    <link rel="search" title="검색" href="search.html" />
    <link rel="next" title="WebCaching framework" href="WebCaching.html" />
    <link rel="prev" title="The uWSGI alarm subsystem (from 1.3)" href="AlarmSubsystem.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> uWSGI
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="WSGIquickstart.html">Quickstart for Python/WSGI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="PSGIquickstart.html">Quickstart for perl/PSGI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="RackQuickstart.html">Quickstart for ruby/Rack applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="Snippets.html">Snippets</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Download.html">Getting uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install.html">Installing uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="BuildSystem.html">The uWSGI build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="Management.html">Managing the uWSGI server</a></li>
<li class="toctree-l1"><a class="reference internal" href="LanguagesAndPlatforms.html">Supported languages and platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="SupportedPlatforms.html">Supported Platforms/Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebServers.html">Web server integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="ThingsToKnow.html">Things to know (best practices and &quot;issues&quot;) READ IT !!!</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration.html">Configuring uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="FallbackConfig.html">Fallback configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConfigLogic.html">Configuration logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="Options.html">uWSGI Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="CustomOptions.html">Defining new options for your instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="ParsingOrder.html">How uWSGI parses config files</a></li>
<li class="toctree-l1"><a class="reference internal" href="Vars.html">uwsgi protocol magic variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="Protocol.html">The uwsgi Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="AttachingDaemons.html">Managing external daemons/services</a></li>
<li class="toctree-l1"><a class="reference internal" href="MasterFIFO.html">The Master FIFO</a></li>
<li class="toctree-l1"><a class="reference internal" href="Inetd.html">Socket activation with inetd/xinetd</a></li>
<li class="toctree-l1"><a class="reference internal" href="Upstart.html">Running uWSGI via Upstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="Systemd.html">Systemd</a></li>
<li class="toctree-l1"><a class="reference internal" href="Circus.html">Running uWSGI instances with Circus</a></li>
<li class="toctree-l1"><a class="reference internal" href="Embed.html">Embedding an application in uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="LogFormat.html">Formatting uWSGI requests logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="LogEncoders.html">Log encoders</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hooks.html">Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="WorkerOverride.html">Overriding Workers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="ThirdPartyPlugins.html">uWSGI third party plugins</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/CachingCookbook.html">The uWSGI Caching Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/Django_and_nginx.html">Setting up Django and your web server with uWSGI and nginx</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/dreamhost.html">Running uWSGI on Dreamhost shared hosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/heroku_python.html">Running python webapps on Heroku with uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/heroku_ruby.html">Running Ruby/Rack webapps on Heroku with uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/ReliableFuse.html">Reliably use FUSE filesystems for uWSGI vassals (with Linux)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/DynamicProxying.html">Build a dynamic proxy using RPC and internal routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/GraphiteAndMetrics.html">Setting up Graphite on Ubuntu using the Metrics subsystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="articles/SerializingAccept.html">Serializing accept(), AKA Thundering Herd, AKA the Zeeg Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/TheArtOfGracefulReloading.html">The Art of Graceful Reloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/FunWithPerlEyetoyRaspberrypi.html">Fun with Perl, Eyetoy and RaspberryPi</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/OffloadingWebsocketsAndSSE.html">Offloading Websockets and Server-Sent Events AKA &quot;Combine them with Django safely&quot;</a></li>
<li class="toctree-l1"><a class="reference internal" href="articles/WSGIEnvBehaviour.html">WSGI env behaviour policies</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="AlarmSubsystem.html">The uWSGI alarm subsystem (from 1.3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The uWSGI caching framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-cache">Creating a &quot;cache&quot;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-sad-weird-strange-bad-note-about-the-maximum-number-of-items">A sad/weird/strange/bad note about &quot;the maximum number of items&quot;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-the-cache-how-it-works">Configuring the cache (how it works)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#single-block-faster-vs-bitmaps-slower">Single block (faster) vs. bitmaps (slower)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#persistent-storage">Persistent storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#network-access">Network access</a></li>
<li class="toctree-l2"><a class="reference internal" href="#udp-sync">UDP sync</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cache2-options">--cache2 options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#name">name</a></li>
<li class="toctree-l3"><a class="reference internal" href="#max-items-maxitems-items">max-items || maxitems || items</a></li>
<li class="toctree-l3"><a class="reference internal" href="#blocksize">blocksize</a></li>
<li class="toctree-l3"><a class="reference internal" href="#blocks">blocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hash">hash</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hashsize-hash-size">hashsize || hash_size</a></li>
<li class="toctree-l3"><a class="reference internal" href="#keysize-key-size">keysize || key_size</a></li>
<li class="toctree-l3"><a class="reference internal" href="#store">store</a></li>
<li class="toctree-l3"><a class="reference internal" href="#store-sync-storesync">store_sync || storesync</a></li>
<li class="toctree-l3"><a class="reference internal" href="#store-delete-storedelete">store_delete || storedelete</a></li>
<li class="toctree-l3"><a class="reference internal" href="#node-nodes">node || nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sync">sync</a></li>
<li class="toctree-l3"><a class="reference internal" href="#udp-udp-servers-udp-server-udpserver">udp || udp_servers || udp_server || udpserver</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bitmap">bitmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lastmod">lastmod</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ignore-full">ignore_full</a></li>
<li class="toctree-l3"><a class="reference internal" href="#purge-lru">purge_lru</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-the-cache-from-your-applications-using-the-cache-api">Accessing the cache from your applications using the cache api</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-cache-sweeper-thread">The Cache sweeper thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="#web-caching">Web caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="#monitoring-caches">Monitoring caches</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="WebCaching.html">WebCaching framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cron.html">The uWSGI cron-like interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="Fastrouter.html">The uWSGI FastRouter</a></li>
<li class="toctree-l1"><a class="reference internal" href="InternalRouting.html">uWSGI internal routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="Legion.html">The uWSGI Legion subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Locks.html">Locks</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mules.html">uWSGI Mules</a></li>
<li class="toctree-l1"><a class="reference internal" href="OffloadSubsystem.html">The uWSGI offloading subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Queue.html">The uWSGI queue framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="RPC.html">uWSGI RPC Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="SharedArea.html">SharedArea -- share memory pages between uWSGI components</a></li>
<li class="toctree-l1"><a class="reference internal" href="Signals.html">The uWSGI Signal Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Spooler.html">The uWSGI Spooler</a></li>
<li class="toctree-l1"><a class="reference internal" href="SubscriptionServer.html">uWSGI Subscription Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="StaticFiles.html">Serving static files with uWSGI (updated to 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="SNI.html">SNI - Server Name Identification (virtual hosting for SSL nodes)</a></li>
<li class="toctree-l1"><a class="reference internal" href="GeoIP.html">The GeoIP plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="Transformations.html">uWSGI Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebSockets.html">WebSocket support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Metrics.html">The Metrics subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Chunked.html">The Chunked input API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Cheaper.html">The uWSGI cheaper subsystem -- adaptive process spawning</a></li>
<li class="toctree-l1"><a class="reference internal" href="Emperor.html">The uWSGI Emperor -- multi-app deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="Broodlord.html">Auto-scaling with Broodlord mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="Zerg.html">Zerg mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="DynamicApps.html">Adding applications dynamically</a></li>
<li class="toctree-l1"><a class="reference internal" href="SSLScaling.html">Scaling SSL connections (uWSGI 1.9)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Capabilities.html">Setting POSIX Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cgroups.html">Running uWSGI in a Linux CGroup</a></li>
<li class="toctree-l1"><a class="reference internal" href="KSM.html">Using Linux KSM in uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Namespaces.html">Jailing your apps using Linux Namespaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="Namespaces.html#the-old-way-the-namespace-option">The old way: the --namespace option</a></li>
<li class="toctree-l1"><a class="reference internal" href="FreeBSDJails.html">FreeBSD Jails</a></li>
<li class="toctree-l1"><a class="reference internal" href="ForkptyRouter.html">The Forkpty Router</a></li>
<li class="toctree-l1"><a class="reference internal" href="TunTapRouter.html">The TunTap Router</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Nagios.html">Monitoring uWSGI with Nagios</a></li>
<li class="toctree-l1"><a class="reference internal" href="SNMP.html">The embedded SNMP server</a></li>
<li class="toctree-l1"><a class="reference internal" href="PushingStats.html">Pushing statistics (from 1.4)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Carbon.html">Integration with Graphite/Carbon</a></li>
<li class="toctree-l1"><a class="reference internal" href="StatsServer.html">The uWSGI Stats Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="Metrics.html">The Metrics subsystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Async.html">uWSGI asynchronous/non-blocking modes (updated to uWSGI 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Gevent.html">The Gevent loop engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tornado.html">The Tornado loop engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="uGreen.html">uGreen -- uWSGI Green Threads</a></li>
<li class="toctree-l1"><a class="reference internal" href="asyncio.html">The asyncio loop engine (CPython &gt;= 3.4, uWSGI &gt;= 2.0.4)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Apache.html">Apache support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cherokee.html">Cherokee support</a></li>
<li class="toctree-l1"><a class="reference internal" href="HTTP.html">Native HTTP support</a></li>
<li class="toctree-l1"><a class="reference internal" href="HTTPS.html">HTTPS 지원 (1.3 버전부터)</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPDY.html">The SPDY router (uWSGI 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lighttpd.html">Lighttpd support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mongrel2.html">Attaching uWSGI to Mongrel2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Nginx.html">Nginx support</a></li>
<li class="toctree-l1"><a class="reference internal" href="OpenBSDhttpd.html">Using OpenBSD httpd as proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="OpenBSDhttpd.html#notes">Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Python.html">Python support</a></li>
<li class="toctree-l1"><a class="reference internal" href="PyPy.html">The PyPy plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="PHP.html">Running PHP scripts in uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Perl.html">uWSGI Perl support (PSGI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Ruby.html">Ruby support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lua.html">Using Lua/WSAPI with uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="JVM.html">JVM in the uWSGI server (updated to 1.9)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mono.html">The Mono ASP.NET plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="CGI.html">Running CGI scripts on uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="GCCGO.html">The GCCGO plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="Symcall.html">The Symcall plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSLT.html">The XSLT plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="SSI.html">SSI (Server Side Includes) plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="V8.html">uWSGI V8 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="GridFS.html">The GridFS plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="GlusterFS.html">The GlusterFS plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="Rados.html">The RADOS plugin</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Pty.html">The Pty plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPNEGO.html">SPNEGO authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="LDAP.html">Configuring uWSGI with LDAP</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Erlang.html">Integrating uWSGI with Erlang</a></li>
<li class="toctree-l1"><a class="reference internal" href="ManagementFlag.html">Management Flags</a></li>
<li class="toctree-l1"><a class="reference internal" href="Go.html">uWSGI Go support (1.4 only)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.18.html">uWSGI 2.0.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.17.1.html">uWSGI 2.0.17.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.17.html">uWSGI 2.0.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.16.html">uWSGI 2.0.16</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.15.html">uWSGI 2.0.15</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.14.html">uWSGI 2.0.14</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.13.1.html">uWSGI 2.0.13.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.13.html">uWSGI 2.0.13</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.12.html">uWSGI 2.0.12</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.11.2.html">uWSGI 2.0.11.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.11.1.html">uWSGI 2.0.11.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.11.html">uWSGI 2.0.11</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.10.html">uWSGI 2.0.10</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.9.html">uWSGI 2.0.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.8.html">uWSGI 2.0.8</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.7.html">uWSGI 2.0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.6.html">uWSGI 2.0.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.5.html">uWSGI 2.0.5</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.4.html">uWSGI 2.0.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.3.html">uWSGI 2.0.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.2.html">uWSGI 2.0.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.1.html">uWSGI 2.0.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-2.0.html">uWSGI 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.21.html">uWSGI 1.9.21</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.20.html">uWSGI 1.9.20</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.19.html">uWSGI 1.9.19</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.18.html">uWSGI 1.9.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.17.html">uWSGI 1.9.17</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.16.html">uWSGI 1.9.16</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.15.html">uWSGI 1.9.15</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.14.html">uWSGI 1.9.14</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.13.html">uWSGI 1.9.13</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.12.html">uWSGI 1.9.12</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.11.html">uWSGI 1.9.11</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.10.html">uWSGI 1.9.10</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.9.html">uWSGI 1.9.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.8.html">uWSGI 1.9.8</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.7.html">uWSGI 1.9.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.6.html">uWSGI 1.9.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.5.html">uWSGI 1.9.5</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.4.html">uWSGI 1.9.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.3.html">uWSGI 1.9.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.2.html">uWSGI 1.9.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.1.html">uWSGI 1.9.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog-1.9.html">uWSGI 1.9</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">uWSGI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>The uWSGI caching framework</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Caching.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-uwsgi-caching-framework">
<h1>The uWSGI caching framework<a class="headerlink" href="#the-uwsgi-caching-framework" title="제목 주소">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last">This page is about &quot;new-generation&quot; cache introduced in uWSGI 1.9.
For old-style cache (now simply named &quot;web caching&quot;) check <a class="reference internal" href="WebCaching.html"><span class="doc">WebCaching framework</span></a></p>
</div>
<p>uWSGI includes a very fast, all-in-memory, zero-IPC, SMP-safe,
constantly-optimizing, highly-tunable, key-value store simply called &quot;the
caching framework&quot;.  A single uWSGI instance can create an unlimited number of
&quot;caches&quot; each one with different setup and purpose.</p>
<div class="section" id="creating-a-cache">
<h2>Creating a &quot;cache&quot;<a class="headerlink" href="#creating-a-cache" title="제목 주소">¶</a></h2>
<p>To create a cache you use the <code class="docutils literal notranslate"><span class="pre">--cache2</span></code> option. It takes a dictionary of
arguments specifying the cache configuration.  To have a valid cache you need
to specify its name and the maximum number of items it can contains.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>uwsgi --cache2 <span class="nv">name</span><span class="o">=</span>mycache,items<span class="o">=</span><span class="m">100</span> --socket :3031
</pre></div>
</div>
<p>this will create a cache named &quot;mycache&quot; with a maximum of 100 items. Each item can be at most 64k.</p>
</div>
<div class="section" id="a-sad-weird-strange-bad-note-about-the-maximum-number-of-items">
<h2>A sad/weird/strange/bad note about &quot;the maximum number of items&quot;<a class="headerlink" href="#a-sad-weird-strange-bad-note-about-the-maximum-number-of-items" title="제목 주소">¶</a></h2>
<p>If you start with a 100 item cache you will suddenly note that the true maximum number of items you can use is indeed 99.</p>
<p>This is because the first item of the cache is always internally used as &quot;NULL/None/undef&quot; item.</p>
<p>Remember this when you start planning your cache configuration.</p>
</div>
<div class="section" id="configuring-the-cache-how-it-works">
<h2>Configuring the cache (how it works)<a class="headerlink" href="#configuring-the-cache-how-it-works" title="제목 주소">¶</a></h2>
<p>The uWSGI cache works like a file system. You have an area for storing keys
(metadata) followed by a series of fixed size blocks in which to store the
content of each key.  Another memory area, the hash table is allocated for fast
search of keys.  When you request a key, it is first hashed over the hash
table. Each hash points to a key in the metadata area.  Keys can be linked to
manage hash collisions. Each key has a reference to the block containing its
value.</p>
</div>
<div class="section" id="single-block-faster-vs-bitmaps-slower">
<h2>Single block (faster) vs. bitmaps (slower)<a class="headerlink" href="#single-block-faster-vs-bitmaps-slower" title="제목 주소">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">경고</p>
<p class="last">Bitmap mode is considered production ready only from uWSGI 2.0.2! (That is, it was buggy before that.)</p>
</div>
<p>In the standard (&quot;single block&quot;) configuration a key can only map to a single
block. Thus if you have a cache block size of 64k your items can be at most
65,535 bytes long. Conversely items smaller than that will still consume 64k of
memory.  The advantage of this approach is its simplicity and speed. The system
does not need to scan the memory for free blocks every time you insert an
object in the cache.</p>
<p>If you need a more versatile (but relatively slower) approach, you can enable
the &quot;bitmap&quot; mode. Another memory area will be created containing a map of all
of the used and free blocks of the cache. When you insert an item the bitmap is
scanned for contiguous free blocks.  Blocks must be contiguous, this could lead
to a bit of fragmentation but it is not as big a problem as with disk storage,
and you can always tune the block size to reduce fragmentation.</p>
</div>
<div class="section" id="persistent-storage">
<h2>Persistent storage<a class="headerlink" href="#persistent-storage" title="제목 주소">¶</a></h2>
<p>You can store cache data in a backing store file to implement persistence.  As
this is managed by <code class="docutils literal notranslate"><span class="pre">mmap()</span></code> it is almost transparent to the user.  You should
not rely on this for data safety (disk syncing is managed asynchronously); use
it only for performance purposes.</p>
</div>
<div class="section" id="network-access">
<h2>Network access<a class="headerlink" href="#network-access" title="제목 주소">¶</a></h2>
<p>All of your caches can be accessed over the network. A request plugin named
&quot;cache&quot; (modifier1 111) manages requests from external nodes. On a standard
monolithic build of uWSGI the cache plugin is always enabled.  The cache plugin
works in a fully non-blocking way, and it is greenthreads/coroutine friendly so
you can use technologies like gevent or Coro::AnyEvent with it safely.</p>
</div>
<div class="section" id="udp-sync">
<h2>UDP sync<a class="headerlink" href="#udp-sync" title="제목 주소">¶</a></h2>
<p>This technique has been inspired by the STUD project, which uses something like
this for SSL session scaling (and coincidentally the same approach can be used
with uWSGI SSL/HTTPS routers).  Basically whenever you set/update/delete an
item from the cache, the operation is propagated to remote nodes via simple UDP
packets.  There are no built-in guarantees with UDP syncing so use it only for
very specific purposes, like <a class="reference internal" href="SSLScaling.html"><span class="doc">Scaling SSL connections (uWSGI 1.9)</span></a>.</p>
</div>
<div class="section" id="cache2-options">
<h2>--cache2 options<a class="headerlink" href="#cache2-options" title="제목 주소">¶</a></h2>
<p>This is the list of all of the options (and their aliases) of <code class="docutils literal notranslate"><span class="pre">--cache2</span></code>.</p>
<div class="section" id="name">
<h3>name<a class="headerlink" href="#name" title="제목 주소">¶</a></h3>
<p>Set the name of the cache. Must be unique in an instance.</p>
</div>
<div class="section" id="max-items-maxitems-items">
<h3>max-items || maxitems || items<a class="headerlink" href="#max-items-maxitems-items" title="제목 주소">¶</a></h3>
<p>Set the maximum number of cache items.</p>
</div>
<div class="section" id="blocksize">
<h3>blocksize<a class="headerlink" href="#blocksize" title="제목 주소">¶</a></h3>
<p>Set the size (in bytes) of a single block.</p>
</div>
<div class="section" id="blocks">
<h3>blocks<a class="headerlink" href="#blocks" title="제목 주소">¶</a></h3>
<p>Set the number of blocks in the cache. Useful only in bitmap mode, otherwise
the number of blocks is equal to the maximum number of items.</p>
</div>
<div class="section" id="hash">
<h3>hash<a class="headerlink" href="#hash" title="제목 주소">¶</a></h3>
<p>Set the hash algorithm used in the hash table. Currentl options are &quot;djb33x&quot;
(default) and &quot;murmur2&quot;.</p>
</div>
<div class="section" id="hashsize-hash-size">
<h3>hashsize || hash_size<a class="headerlink" href="#hashsize-hash-size" title="제목 주소">¶</a></h3>
<p>this is the size of the hash table in bytes. Generally 65536 (the default) is a
good value. Change it only if you know what you are doing or if you have a lot
of collisions in your cache.</p>
</div>
<div class="section" id="keysize-key-size">
<h3>keysize || key_size<a class="headerlink" href="#keysize-key-size" title="제목 주소">¶</a></h3>
<p>Set the maximum size of a key, in bytes (default 2048)</p>
</div>
<div class="section" id="store">
<h3>store<a class="headerlink" href="#store" title="제목 주소">¶</a></h3>
<p>Set the filename for the persistent storage. If it doesn't exist, the system
assumes an empty cache and the file will be created.</p>
</div>
<div class="section" id="store-sync-storesync">
<h3>store_sync || storesync<a class="headerlink" href="#store-sync-storesync" title="제목 주소">¶</a></h3>
<p>Set the number of seconds after which msync() is called to flush memory cache
on disk when in persistent mode.  By default it is disabled leaving the
decision-making to the kernel.</p>
</div>
<div class="section" id="store-delete-storedelete">
<h3>store_delete || storedelete<a class="headerlink" href="#store-delete-storedelete" title="제목 주소">¶</a></h3>
<p>uWSGI, by default, will not start if a cache file exists and the store file does not match the configured items/blocksize.
Setting this option will make uWSGI delete the existing file upon mismatch and create a new one.</p>
</div>
<div class="section" id="node-nodes">
<h3>node || nodes<a class="headerlink" href="#node-nodes" title="제목 주소">¶</a></h3>
<p>A semicolon separated list of UDP servers which will receive UDP cache updates.</p>
</div>
<div class="section" id="sync">
<h3>sync<a class="headerlink" href="#sync" title="제목 주소">¶</a></h3>
<p>A semicolon separated list of uwsgi addresses which the cache subsystem will
connect to for getting a full dump of the cache. It can be used for initial
cache synchronization. The first node sending a valid dump will stop the
procedure.</p>
</div>
<div class="section" id="udp-udp-servers-udp-server-udpserver">
<h3>udp || udp_servers || udp_server || udpserver<a class="headerlink" href="#udp-udp-servers-udp-server-udpserver" title="제목 주소">¶</a></h3>
<p>A semicolon separated list of UDP addresses on which to bind the cache to wait for UDP updates.</p>
</div>
<div class="section" id="bitmap">
<h3>bitmap<a class="headerlink" href="#bitmap" title="제목 주소">¶</a></h3>
<p>Set to 1 to enable bitmap mode.</p>
</div>
<div class="section" id="lastmod">
<h3>lastmod<a class="headerlink" href="#lastmod" title="제목 주소">¶</a></h3>
<p>Setting lastmod to 1 will update last_modified_at timestamp of each cache on
every cache item modification.  Enable it if you want to track this value or if
other features depend on it. This value will then be accessible via the stats
socket.</p>
</div>
<div class="section" id="ignore-full">
<h3>ignore_full<a class="headerlink" href="#ignore-full" title="제목 주소">¶</a></h3>
<p>By default uWSGI will print warning message on every cache set operation if the cache is full. To disable this warning set this option. Available since 2.0.4</p>
</div>
<div class="section" id="purge-lru">
<h3>purge_lru<a class="headerlink" href="#purge-lru" title="제목 주소">¶</a></h3>
<p>This option allows the caching framework to evict Least Recently Used (LRU)
item when you try to add new item to cache storage that is full. The <code class="docutils literal notranslate"><span class="pre">expires</span></code>
argument described below will be ignored. An item is considered used when
it's accessed, added and updated by cache_get(), cache_set() and
cache_update(); whereas the existence check by cache_exists() is not.</p>
</div>
</div>
<div class="section" id="accessing-the-cache-from-your-applications-using-the-cache-api">
<h2>Accessing the cache from your applications using the cache api<a class="headerlink" href="#accessing-the-cache-from-your-applications-using-the-cache-api" title="제목 주소">¶</a></h2>
<p>You can access the various cache in your instance or on remote instances by
using the cache API.  Currently the following functions are exposed (each
language might name them a bit differently from the standard):</p>
<blockquote>
<div><ul class="simple">
<li>cache_get(key[,cache])</li>
<li>cache_set(key,value[,expires,cache])</li>
<li>cache_update(key,value[,expires,cache])</li>
<li>cache_exists(key[,cache])</li>
<li>cache_del(key[,cache])</li>
<li>cache_clear([cache])</li>
</ul>
</div></blockquote>
<p>If the language/platform calling the cache API differentiates between strings
and bytes (like Python 3 and Java) you have to assume that keys are strings and
values are bytes (or bytearray in the java way). Otherwise keys and values are
both strings in no specific encoding, as internally the cache values and keys
are simple binary blobs.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">expires</span></code> argument (default to 0 for disabled) is the number of seconds
after the object is no more valid (and will be removed by the cache sweeper
when <code class="docutils literal notranslate"><span class="pre">purge_lru</span></code> is not set, see below)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">cache</span></code> argument is the so called &quot;magic identifier&quot;. Its syntax is
<code class="docutils literal notranslate"><span class="pre">cache[&#64;node]</span></code>.</p>
<p>To operate on the local cache &quot;mycache&quot; you set it as &quot;mycache&quot;, while to
operate on &quot;yourcache&quot; on the uWSGI server at 192.168.173.22 port 4040 the
value will be <code class="docutils literal notranslate"><span class="pre">yourcache&#64;192.168.173.22:4040</span></code>.</p>
<p>An empty cache value means the default cache which is generally the first
initialized. The default value is empty.</p>
<p>All of the network operations are transparent, fully non-blocking, and
threads/greenthreads friendly.</p>
</div>
<div class="section" id="the-cache-sweeper-thread">
<h2>The Cache sweeper thread<a class="headerlink" href="#the-cache-sweeper-thread" title="제목 주소">¶</a></h2>
<p>When at least one cache is configured without <code class="docutils literal notranslate"><span class="pre">purge_lru</span></code> and the master
is enabled a thread named &quot;the cache sweeper&quot; is started.  Its main purpose
is deleting expired keys from the cache. So, if you want auto-expiring you
need to enable the master.</p>
</div>
<div class="section" id="web-caching">
<h2>Web caching<a class="headerlink" href="#web-caching" title="제목 주소">¶</a></h2>
<p>In its first incarnation the uWSGI caching framework was meant only for caching
of web pages. The old system has been rebuilt. It is now named
<a class="reference internal" href="WebCaching.html"><span class="doc">WebCaching framework</span></a>. Enabling the old-style <code class="docutils literal notranslate"><span class="pre">--cache</span></code> option will create a
cache named &quot;default&quot;.</p>
</div>
<div class="section" id="monitoring-caches">
<h2>Monitoring caches<a class="headerlink" href="#monitoring-caches" title="제목 주소">¶</a></h2>
<p>The stats server exposes cache information. An ncurses based tool (<a class="reference external" href="https://pypi.python.org/pypi/uwsgicachetop">https://pypi.python.org/pypi/uwsgicachetop</a>) exists that uses that information for real-time monitoring.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="WebCaching.html" class="btn btn-neutral float-right" title="WebCaching framework" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="AlarmSubsystem.html" class="btn btn-neutral" title="The uWSGI alarm subsystem (from 1.3)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2016, uWSGI.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0',
            LANGUAGE:'ko',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>